<!DOCTYPE html>
<html>

<body style="background:#262626;">

<img id="card0" width="128px" onclick="clickCard(0)">
<img id="card1" width="128px" onclick="clickCard(1)">
<img id="card2" width="128px" onclick="clickCard(2)">
<img id="card3" width="128px" onclick="clickCard(3)">
<img id="card4" width="128px" onclick="clickCard(4)">
<img id="card5" width="128px" onclick="clickCard(5)">


<img id="card-extra" width="128px" style="padding-left: 12px; border-left: white 1px solid; margin-left: 12px;">
<div id="value" style="color:white">
  Fifteen: <span id="score-fifteen">2</span><br>
  Pair: <span id="score-pair">2</span><br>
  Royal Pair: <span id="score-royal">6</span><br>
  Double Royal Pair: <span id="score-double">12</span><br>
  Run: <span id="score-run">1</span><br>
  Flush: <span id="score-flush">1</span><br>
</div>


<button onclick="discardCards()" id="discard-button" style="display:none;">Discard</button>
</body>

<script>
// Fifteen, Pair, Royal, Double, Run, Flush
var scores = [0,0,0,0,0,0];

var deck = [
    "spades_A", "spades_K", "spades_Q", "spades_J", "spades_10",
    "spades_9", "spades_8", "spades_7", "spades_6", "spades_5",
    "spades_4", "spades_3", "spades_2",

    "hearts_A", "hearts_K", "hearts_Q", "hearts_J", "hearts_10",
    "hearts_9", "hearts_8", "hearts_7", "hearts_6", "hearts_5",
    "hearts_4", "hearts_3", "hearts_2",

    "diamonds_A", "diamonds_K", "diamonds_Q", "diamonds_J", "diamonds_10",
    "diamonds_9", "diamonds_8", "diamonds_7", "diamonds_6", "diamonds_5",
    "diamonds_4", "diamonds_3", "diamonds_2",

    "clubs_A", "clubs_K", "clubs_Q", "clubs_J", "clubs_10",
    "clubs_9", "clubs_8", "clubs_7", "clubs_6", "clubs_5",
    "clubs_4", "clubs_3", "clubs_2"
];

function shuffleDeck(val) {
  let array = val.slice();
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1)); 
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

deck = shuffleDeck(deck);

//alert(deck[0]);
var i;
for (i=0; i<6; i++) {  
  document.getElementById("card" + i).src="https://raw.githubusercontent.com/hanhaechi/playing-cards/refs/heads/master/" + deck[i] + ".png";
}

var selectedCards = [];

var play = false;

function clickCard(val) {

    var cardSrc = document.getElementById("card" + val).src;
    cardSrc = cardSrc.slice(0, -4); 
    var value = getStringAfterLastChar(cardSrc, "_");
    
  if (!play) {

    //alert(value);
    
    if (selectedCards.indexOf(val) >= 0) {
      document.getElementById("card" + val).style.opacity = "1";
      selectedCards.splice(selectedCards.indexOf(val), 1);
    } else {
      document.getElementById("card" + val).style.opacity = "0.5";
      selectedCards.push(val);
    }
    
  
    if (selectedCards.length == 2) {
      document.getElementById("discard-button").style.display = "block";
    } else {
      document.getElementById("discard-button").style.display = "none";
    }
    
  } else {
    if (value == "J" || value == "Q" || value == "K") {
      value = 10;
    } else if (value == "A") {
      value = 1;
    }
    document.getElementById("value").innerHTML = value;
  }
}

var hand = [];

function discardCards() {
  var tmpHand;
  var j;
  for (j=0;j<6;j++) {
    if(j == selectedCards[0] || j == selectedCards[1]) {
      
    } else {
      tmpHand = document.getElementById("card" + j).src.slice(0, -4); 
      hand.push(tmpHand.substring(tmpHand.lastIndexOf('/')+1));
    }
    
  }
  
  document.getElementById("card" + selectedCards[0]).src = "";
  document.getElementById("card" + selectedCards[1]).src = "";
  
  document.getElementById("card-extra").src = src="https://raw.githubusercontent.com/hanhaechi/playing-cards/refs/heads/master/" + deck[6] + ".png";;
  
  tmpHand = document.getElementById("card-extra").src.slice(0, -4); 
  hand.push(tmpHand.substring(tmpHand.lastIndexOf('/')+1));
  
  play = true;
  document.getElementById("discard-button").style = "display: none;";  
  
  alert(hand);
}



function score() {
  //pairs

}

function getStringAfterLastChar(originalString, character) {
  const lastIndex = originalString.lastIndexOf(character);
  if (lastIndex === -1) {
    return originalString; 
  }
  return originalString.slice(lastIndex + 1);
}

function scorePairs(cards) {
  let score = 0;
  for (let i = 0; i < cards.length; i++) {
    for (let j = i + 1; j < cards.length; j++) {
      if (cards[i].rank === cards[j].rank) score += 2;
    }
  }
  return score;
}



</script>

</html>
